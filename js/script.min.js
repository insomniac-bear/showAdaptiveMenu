"use strict";var SIZE_OF_BUTTON_MORE_ON_MOBILE=125,SIZE_OF_BUTTON_MORE_ON_DESKTOP=80,MAX_LIST_ITEM_WIDTH=225,RenderPosition={BEFOREEND:"beforeend",AFTERBEGIN:"afterbegin",BEFORE_ELEMENT:"beforeelemtn"},documentWidth=document.documentElement.clientWidth,currentSizeOfButtonMore=1200<=documentWidth?SIZE_OF_BUTTON_MORE_ON_DESKTOP:SIZE_OF_BUTTON_MORE_ON_MOBILE,getSummaryElementsWidth=function(e){var t=0,n=0;return e.forEach(function(e){t+=e.offsetWidth,n=e.offsetWidth>n?e.offsetWidth:n}),{summaryWidth:t,maxOfWidths:n,averageElementWidth:Math.floor(t/e.length)}},moveElementToHiddenList=function(e,t){var n=t,i=viewMoreItems.length-1;if(NaN===i||i<0)viewMoreList.prepend(e);else{for(;0<=i&&!(n>viewMoreItems[i].getAttribute("data-index"));)i-=1;0<=i?viewMoreItems[i].after(e):viewMoreItems[0].before(e)}},replaceElement=function(e,t,n,i){switch(i){case RenderPosition.BEFOREEND:t.append(e[n].cloneNode(!0)),e[n].remove();break;case RenderPosition.AFTERBEGIN:t.prepend(e[n].cloneNode(!0)),e[n].remove();break;case RenderPosition.BEFORE_ELEMENT:t.before(e[n].cloneNode(!0)),e[n].remove()}},getDefaultButtonWidth=function(){return document.documentElement.offsetWidth<1200?SIZE_OF_BUTTON_MORE_ON_MOBILE:SIZE_OF_BUTTON_MORE_ON_DESKTOP},changeViewMenuElements=function(){if(navMenuMetrix.summaryWidth>navMenuWidth||navWidth<navMenuFullWidth+buttonLoadMoreWidth){var e=Math.ceil((navMenuMetrix.summaryWidth+buttonLoadMoreWidth-navMenuWidth)/navMenuMetrix.averageElementWidth);for(e>menuItems.length-1&&(e=menuItems.length-1),viewMoreElementButton.classList.contains("nav__menu-view-more--hidden")&&viewMoreElementButton.classList.remove("nav__menu-view-more--hidden");0<e;){var t=menuItems.length-1;menuItems[menuItems.length-1].classList.contains("nav__menu-item--active")&&(-1===indexOfActiveItem&&(indexOfActiveItem=menuItems[menuItems.length-1].getAttribute("data-index")),t=menuItems.length-2),moveElementToHiddenList(menuItems[t],menuItems[t].getAttribute("data-index")),setActualOffsetParametres(),e-=1}setActualOffsetParametres()}else if(0===viewMoreItems.length&&viewMoreElementButton.classList.add("nav__menu-view-more--hidden"),navMenuFullWidth+buttonLoadMoreWidth+MAX_LIST_ITEM_WIDTH<navWidth){var n=viewMoreItems[0].getAttribute("data-index");return-1<indexOfActiveItem&&n<=indexOfActiveItem?replaceElement(viewMoreItems,menuItems[menuItems.length-1],0,RenderPosition.BEFORE_ELEMENT):replaceElement(viewMoreItems,navMenu,0,RenderPosition.BEFOREEND),void setActualOffsetParametres()}},setActualOffsetParametres=function(){menuItems=navMenu.querySelectorAll(".nav__menu-item"),viewMoreItems=viewMoreList.querySelectorAll(".nav__menu-item"),navWidth=nav.offsetWidth,navMenuWidth=navMenu.offsetWidth,navMenuFullWidth=navMenu.offsetWidth+navMenu.offsetLeft,navMenuMetrix=getSummaryElementsWidth(menuItems),currentSizeOfButtonMore=1200<=documentWidth?SIZE_OF_BUTTON_MORE_ON_DESKTOP:SIZE_OF_BUTTON_MORE_ON_MOBILE,setClickHandler(menuItems),setClickHandler(viewMoreItems)},onClickNavMenuItem=function(e){var t=nav.querySelector(".nav__menu-item--active");if(t!==e&&t.classList.remove("nav__menu-item--active"),e.classList.add("nav__menu-item--active"),e.parentNode.classList.contains("nav__view-more-list")){var n=e.getAttribute("data-index"),i=menuItems[menuItems.length-1].getAttribute("data-index");(indexOfActiveItem=n)<=i?menuItems[menuItems.length-1].before(e.cloneNode(!0)):menuItems[menuItems.length-1].after(e.cloneNode(!0)),e.remove(),setActualOffsetParametres();var a=menuItems.length-1;menuItems[menuItems.length-1].classList.contains("nav__menu-item--active")&&(-1===indexOfActiveItem&&(indexOfActiveItem=menuItems[menuItems.length-1].getAttribute("data-index")),a=menuItems.length-2);var o=menuItems[a].getAttribute("data-index");moveElementToHiddenList(menuItems[a],o),setActualOffsetParametres()}},setClickHandler=function(e){0<e.length&&e.forEach(function(n){n.classList.contains("nav__menu-item--disabled")||(n.removeEventListener("click",function(e){e.preventDefault();var t=n;n.classList.contains("nav__menu-item--active")||onClickNavMenuItem(t)}),n.addEventListener("click",function(e){e.preventDefault();var t=n;n.classList.contains("nav__menu-item--active")||onClickNavMenuItem(t)}))})},openFlaskMenu=function(){popUpFood.classList.contains("nav__submenu-lv-2-container--active")&&popUpFood.classList.remove("nav__submenu-lv-2-container--active"),popUpFlask.classList.add("nav__submenu-lv-2-container--active");var e=document.documentElement.clientWidth-flaskButton.getBoundingClientRect().right;popUpFlask.style.right=e+"px",popUpFlask.querySelector(".nav__submenu-item-lv-2--acid").addEventListener("click",function(){acidMenu.style.display="block"})},openFoodMenu=function(){popUpFlask.classList.contains("nav__submenu-lv-2-container--active")&&(popUpFlask.classList.remove("nav__submenu-lv-2-container--active"),acidMenu.style.display="none"),popUpFood.classList.add("nav__submenu-lv-2-container--active");var e=document.documentElement.clientWidth-foodButton.getBoundingClientRect().right;popUpFood.style.right=e+"px"},nav=document.querySelector(".nav"),navMenu=document.querySelector(".nav__menu"),viewMoreElementButton=document.querySelector(".nav__menu-view-more"),viewMoreList=viewMoreElementButton.querySelector(".nav__view-more-list"),subMenuList=nav.querySelector(".nav__submenu-list"),menuItems=navMenu.querySelectorAll(".nav__menu-item");menuItems.forEach(function(e,t){e.setAttribute("data-index",t)});var viewMoreItems=viewMoreList.querySelectorAll(".nav__menu-item"),droppedElementsCount=0,navWidth=nav.offsetWidth,navMenuWidth=navMenu.offsetWidth,navMenuFullWidth=navMenu.offsetWidth+navMenu.offsetLeft,navMenuMetrix=getSummaryElementsWidth(menuItems),indexOfActiveItem=-1,buttonLoadMoreWidth=getDefaultButtonWidth();navMenuMetrix.summaryWidth>navWidth&&changeViewMenuElements(),window.addEventListener("resize",function(){setActualOffsetParametres(),changeViewMenuElements()},!1),setClickHandler(menuItems);var popUpFood=document.querySelector(".nav__submenu-lv-2-container--food"),popUpFlask=document.querySelector(".nav__submenu-lv-2-container--flask"),acidMenu=popUpFlask.querySelector(".nav__submenu-list-lv-3--acid"),foodButton=document.querySelector(".nav__submenu-item--food");foodButton.addEventListener("click",openFoodMenu);var flaskButton=document.querySelector(".nav__submenu-item--flask");flaskButton.addEventListener("click",openFlaskMenu);